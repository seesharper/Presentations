<html>

<head>
  <title>.Net Core</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link href="https://fonts.googleapis.com/css?family=Droid+Sans+Mono" rel="stylesheet" type="text/css" />
  <style type="text/css">
    @import url(https://fonts.googleapis.com/css?family=Open+Sans);
    @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
    @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

    body {
      font-family: 'Open Sans';
    }

    code {
      -moz-border-radius: 5px;
      -web-border-radius: 5px;
      background: #e7e8e2;
      border-radius: 5px;
    }

    h1,
    h2,
    h3 {
      font-family: 'Open Sans';
      font-weight: normal;
    }

    .remark-code,
    .remark-inline-code {
      font-family: 'Droid Sans Mono', font-weight: normal;
    }
  </style>
</head>

<body>
  <textarea id="source">

# Bernhard Richter (@bernhardrichter)

* Systemutvikler i DIPS Trondheim
* 48 √•r
* 3 barn, 1 kone, 1 hus, 1 hytte (Sverige ‚òπÔ∏è)og to katter

NuGet (https://www.nuget.org/profiles/bernhard%20richter)

GitHub (https://github.com/seesharper)



Repos

This presentation http://seesharper.github.io/Presentations/DotNetCore/#1

Basic stuff https://github.com/seesharper/NTNU.Samples

Web App Template https://github.com/seesharper/NTNU.WebAppTemplate

![](dips.png "Logo")

---
# .Net Core

".NET Core is a free and open-source, managed computer software framework for Windows, Linux, and macOS operating
systems. It is a cross-platform successor to .NET Framework. The project is primarily developed by Microsoft employees
by way of the .NET Foundation, and released under the MIT License."

![](dips.png "Logo")
---

# A little bit of history

* .Net Framework 1.0 released 13 February 2002

* The Common Language Infrastructure (CLI) is an open specification (ECMA 335)

* .Net Framework and Mono are just implementations of this specification.

* Mono(Miguel de Icaza) Initial Release June 2004 (Prerelease versions existed as early as 2001)

https://www.ecma-international.org/publications/standards/Ecma-335.htm

https://time.graphics/line/78368

![](dips.png "Logo")

---

# Open Source

* Everything used to be closed source
* Now everything is open source
* Listens to the dev community
* All on Github (https://github.com/dotnet/runtime)

https://github.com/dotnet/runtime/issues/35999

https://github.com/dotnet/runtime/pull/40227#issuecomment-668266330

![](dips.png "Logo")
---

# Why .Net Core

* Multiple implementations of the specification (.Net Framework, SilverLight, Mono)
* A single implementation designed to be cross platform
* Being able to release new versions of .Net Core independently of Windows versions
* Define a new standard to express the API level for a given library/application (NetStandard).
* Open Source

https://github.com/microsoft

![](dips.png "Logo")

---

# Cross platform

* Mac
* Linux
* Windows
* ARM (Raspberry PI)
* Tooling (dotnet CLI , VS Code and many others)

![](dips.png "Logo")

---

# The dotnet CLI

* Command line tool for working with .Net Core apps
* No need for a particular IDE
* Everything can be done using the terminal
* Creating new solutions
* Adding NuGet packages
* Building and deploying apps
* Extensible (dotnet-script, dotnet-serve)
* Create and manage projects from the command line
* Project templates
* Cross platform

```
dotnet --info
```


![](dips.png "Logo")

---
# Our first .Net Core application

* Create a new project using the DotNet CLI
* Add package references
* Build and publish
* Framework-dependent vs self-contained deployment.



![](dips.png "Logo")

---


# Creating our first app

Create a folder for your app

```
dotnet new console
```

This will scaffold a new console app.

```
dotnet run
```



![](dips.png "Logo")
---

# Building the app

### Debug/Release mode

`debug` mode is used to enable debugging, while `release` mode is usually used when publishing an app.

```
dotnet build -c release/debug
```

![](dips.png "Logo")

---

# Publishing the app

### Framework dependant deployment (FDD)
* Requires the runtime to be installed
* Produces smaller output

### Self Contained Deployment SDD

* Produces binaries targeting a specific runtime such as `osx-x64`
* No need to install .Net Core Runtime


```
dotnet publish
```

vs

```
dotnet publish -r osx-x64 --self-contained true
```

![](dips.png "Logo")
---

# What do absolutely need to know?

* Generics
* LINQ (Language Integrated Query)
* Async/Await
* Dependency Injection
* CQRS (http://seesharper.github.io/Presentations/CQRS/#1)

![](dips.png "Logo")

---
# LINQ

* Lambda expressions Anonymous functions
* Extension methods
* Examples

![](dips.png "Logo")
---
# Async await

* Simplify asynchronous programming
* Almost everything is async in .Net Core (IO)
* Examples

![](dips.png "Logo")
---

# Dependency Injection

* Loosely coupled components
* Manually vs using a DI container
* LifeTimes (singleton, transient and scoped)
* Decorator pattern

![](dips.png "Logo")
---

# Testing

* Unit Tests
* Integration Tests (end to end)
* xUnit (nUnit, Fixie)
* Assertion frameworks (FluentAssertions)
* Mocking (Moq)
* Code Coverage (coverlet)

![](dips.png "Logo")


---

# NuGet

* Every single dependency is a NuGet package.
* If a bug is found within one of these packages, it can be addressed and released much faster than on .Net Framework.
* Global NuGet cache


https://www.nuget.org/packages/System.Collections/

![](dips.png "Logo")
---

## Global Tools

* Distribute command line apps as NuGet packages
* Requires the .Net Core runtime to be installed
* Cross platform package manager
* Allows global extensions to the DotNet CLI.
* Provides the same semantics as global NPM modules

```
dotnet tool install -g dotnet-deps
```

![](dips.png "Logo")

---

# dotnet-script

* https://github.com/filipw/dotnet-script
* C# scripting on .Net Core
* Inline NuGet support
* Support for debugging in VS Code

#Demo

---


# Net Standard

"The .NET Standard is a formal specification of .NET APIs that are intended to be available on all .NET implementations. The motivation behind the .NET Standard is establishing greater uniformity in the .NET ecosystem."

* Relevant for all implentations of the CLI (Mono, .Net Framework, .Net Core)

* Replaces PCL's (Portable class libraries).

* With NetStandard2.0 we start to see NuGet packages that are NetStandard2.0 only.

* The need for cross compilation becomes less relevant as the standard emerges.

![](dips.png "Logo")
---

# Portable Class Libraries

## PCL Hell

https://github.com/seesharper/LightInject/blob/116c47e5ea2613e5ec22b133f38e7c78928b4481/LightInject/LightInject.cs

## NetStandard

https://github.com/seesharper/LightInject/blob/master/src/LightInject/LightInject.cs

![](dips.png "Logo")
---

# Portable Class Libraries

![](PCL.png "Logo Title Text 1")
---
![](PCL2.png "Logo Title Text 1")
---
![](netstandard.png "Logo Title Text 1")
---

# Code coverage

* An important tool to measure code quality
* Coverlet (Cross platform code coverage analysis)
* What is an acceptable threshold for code coverage?

---


# Asp.Net Core

![](aspnetcore20.png "Logo Title Text 1")

---


# Kestrel

"Kestrel is a cross-platform web server for ASP.NET Core based on libuv, a cross-platform asynchronous I/O library. Kestrel is the web server that's included by default in ASP.NET Core project templates."

* Performance
* Cross platform
* Typically behind a reverse proxy such as NGINX

https://www.techempower.com/benchmarks/#section=data-r19&hw=ph&test=plaintext

---



# Let's build a web app üòÄ

We need dotnet-script for building

```
dotnet install tool -g dotnet-script
```

Clone the template repo

```
git clone https://github.com/seesharper/NTNU.WebAppTemplate.git
```
https://github.com/seesharper/NTNU.WebAppTemplate.git


![](dips.png "Logo")




    </textarea>
  <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js" type="text/javascript"></script>
  <script type="text/javascript">
    var hljs = remark.highlighter.engine;
  </script>
  <script type="text/javascript">
    var slideshow = remark.create({
      highlightStyle: "monokai",
      highlightLanguage: "cs",
      ratio: "16:9",
    });
  </script>
</body>

</html>